{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/app/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { role, key } = body;\r\n\r\n        // Validasi dasar\r\n        if (!role || !key) {\r\n            return NextResponse.json({ error: 'Missing role or key' }, { status: 400 });\r\n        }\r\n\r\n        // Simpan Cookie (HTTP Only untuk keamanan)\r\n        // Set 'user_role' untuk middleware check\r\n        cookies().set({\r\n            name: 'user_role',\r\n            value: role,\r\n            httpOnly: false, // Allow client JS to read if needed, but mainly for middleware\r\n            path: '/',\r\n            maxAge: 60 * 60 * 24 * 7, // 1 minggu\r\n        });\r\n\r\n        // Set 'access_token' (bisa diisi key atau JWT jika ada)\r\n        cookies().set({\r\n            name: 'access_token',\r\n            value: key,\r\n            httpOnly: true,\r\n            path: '/',\r\n            maxAge: 60 * 60 * 24 * 7,\r\n        });\r\n\r\n        return NextResponse.json({ success: true, message: 'Session created' });\r\n\r\n    } catch (error) {\r\n        return NextResponse.json({ error: 'Server error' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG;QAEtB,iBAAiB;QACjB,IAAI,CAAC,QAAQ,CAAC,KAAK;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,2CAA2C;QAC3C,yCAAyC;QACzC,IAAA,4IAAO,IAAG,GAAG,CAAC;YACV,MAAM;YACN,OAAO;YACP,UAAU;YACV,MAAM;YACN,QAAQ,KAAK,KAAK,KAAK;QAC3B;QAEA,wDAAwD;QACxD,IAAA,4IAAO,IAAG,GAAG,CAAC;YACV,MAAM;YACN,OAAO;YACP,UAAU;YACV,MAAM;YACN,QAAQ,KAAK,KAAK,KAAK;QAC3B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAAkB;IAEzE,EAAE,OAAO,OAAO;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACtE;AACJ"}}]
}