{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  // Graceful fallback to prevent crash during build time if env missing\r\n  if (typeof window === 'undefined') {\r\n    console.warn('Supabase env vars missing on server');\r\n  } else {\r\n    throw new Error('Missing Supabase environment variables');\r\n  }\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl || '', supabaseAnonKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AASO,MAAM,WAAW,IAAA,8LAAY,EAAC,eAAe,IAAI,mBAAmB"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/app/koordinator-view/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/utils/supabase';\r\nimport Link from 'next/link';\r\nimport { ArrowLeft, Trophy, FileSpreadsheet } from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\nimport jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\nimport { UserOptions } from 'jspdf-autotable';\r\n\r\ninterface jsPDFCustom extends jsPDF {\r\n    autoTable: (options: UserOptions) => void;\r\n}\r\n\r\ninterface StudentResult {\r\n    id: string | number;\r\n    name: string;\r\n    class: string;\r\n    nis?: string;\r\n    event_name?: string;\r\n    final_score: number;\r\n}\r\n\r\nexport default function RecapPage() {\r\n    const router = useRouter();\r\n    const [results, setResults] = useState<StudentResult[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Check Auth\r\n        const role = localStorage.getItem('user_role');\r\n        if (role !== 'Koordinator Akademik') {\r\n            router.push('/');\r\n        } else {\r\n            fetchResults();\r\n\r\n            // Real-time Sync (Subscription)\r\n            const channel = supabase\r\n                .channel('realtime-scores')\r\n                .on(\r\n                    'postgres_changes',\r\n                    { event: '*', schema: 'public', table: 'scores', filter: 'is_final=eq.true' },\r\n                    (payload) => {\r\n                        console.log('Real-time update received:', payload);\r\n                        fetchResults();\r\n                    }\r\n                )\r\n                .subscribe();\r\n\r\n            // Polling Fallback (5 seconds) as requested\r\n            const intervalId = setInterval(() => {\r\n                fetchResults();\r\n            }, 5000);\r\n\r\n            return () => {\r\n                supabase.removeChannel(channel);\r\n                clearInterval(intervalId);\r\n            };\r\n        }\r\n    }, []);\r\n\r\n    async function fetchResults() {\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Deep Fetch: Scores -> Students -> Events\r\n            // Using strict inner join as requested: students!inner\r\n            // Exact Query requested by User\r\n            // Note: events is linked from scores (if event_id exists on scores) OR from students?\r\n            // User requested: select('*, students(name, nis, class), events(event_name)')\r\n            // We assume 'scores' has 'event_id' FK to 'events'.\r\n            // Exact Query requested by User\r\n            const { data: rawScores, error } = await supabase\r\n                .from('scores')\r\n                .select('*, students(name, nis, class), events(event_name)')\r\n                .eq('is_final', true);\r\n\r\n            if (error) throw error;\r\n\r\n            if (rawScores) {\r\n                // Deduplicate by student_id\r\n                const uniqueMap = new Map();\r\n\r\n                rawScores.forEach((item: any) => {\r\n                    // Safety check for undefined relations\r\n                    const studentName = item.students?.name || 'Unknown';\r\n                    const studentNis = item.students?.nis || '-';\r\n                    const studentClass = item.students?.class || '-';\r\n                    const eventName = item.events?.event_name || '-';\r\n\r\n                    if (!uniqueMap.has(item.student_id)) {\r\n                        uniqueMap.set(item.student_id, {\r\n                            id: item.student_id, // Use student_id from score\r\n                            name: studentName,\r\n                            class: studentClass,\r\n                            nis: studentNis,\r\n                            event_name: eventName,\r\n                            final_score: item.average_score || 0\r\n                        });\r\n                    }\r\n                });\r\n\r\n                const resultsArray: StudentResult[] = Array.from(uniqueMap.values());\r\n\r\n                // Auto-Ranking (Desc)\r\n                resultsArray.sort((a, b) => b.final_score - a.final_score);\r\n                setResults(resultsArray);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error fetching results:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // ... inside component ...\r\n\r\n    const handlePrintPDF = () => {\r\n        const doc = new jsPDF() as jsPDFCustom;\r\n\r\n        // --- Header ---\r\n        doc.setFontSize(18);\r\n        doc.setTextColor(41, 128, 185); // Blue\r\n        doc.text('LANTECH DIGITAL PTY LTD', 105, 20, { align: 'center' });\r\n\r\n        doc.setFontSize(10);\r\n        doc.setTextColor(100);\r\n        doc.text('Digital Assessment System 2026', 105, 26, { align: 'center' });\r\n        doc.line(20, 30, 190, 30); // Horizontal Line\r\n\r\n        // --- Title ---\r\n        doc.setFontSize(14);\r\n        doc.setTextColor(0);\r\n        doc.text('LAPORAN HASIL PENILAIAN UKK', 105, 40, { align: 'center' });\r\n\r\n        doc.setFontSize(10);\r\n        const dateStr = new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });\r\n        doc.text(`Dicetak pada: ${dateStr}`, 105, 46, { align: 'center' });\r\n\r\n        // --- Table ---\r\n        const tableBody = results.map((r, i) => [\r\n            i + 1,\r\n            r.name.toUpperCase(),\r\n            r.class,\r\n            r.event_name || '-',\r\n            r.final_score.toFixed(2),\r\n            r.final_score >= 75 ? 'KOMPETEN' : 'BELUM KOMPETEN'\r\n        ]);\r\n\r\n        doc.autoTable({\r\n            startY: 55,\r\n            head: [['No', 'Nama Siswa', 'Kelas', 'Lomba', 'Nilai', 'Predikat']],\r\n            body: tableBody,\r\n            theme: 'grid',\r\n            headStyles: { fillColor: [41, 128, 185], textColor: 255 },\r\n            styles: { fontSize: 10, cellPadding: 2 },\r\n            columnStyles: {\r\n                0: { cellWidth: 10, halign: 'center' },\r\n                4: { halign: 'right' },\r\n                5: { halign: 'center', fontStyle: 'bold' }\r\n            },\r\n            didParseCell: (data) => {\r\n                // Colorize Predicate\r\n                if (data.section === 'body' && data.column.index === 5) {\r\n                    const text = data.cell.raw as string;\r\n                    if (text === 'BELUM KOMPETEN') {\r\n                        data.cell.styles.textColor = [231, 76, 60]; // Red\r\n                    } else {\r\n                        data.cell.styles.textColor = [39, 174, 96]; // Green\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // --- Footer / Signature ---\r\n        const finalY = (doc as any).lastAutoTable.finalY || 150;\r\n\r\n        if (finalY < 230) {\r\n            doc.text('Mengetahui,', 140, finalY + 30);\r\n            doc.text('Koordinator Penilaian', 140, finalY + 36);\r\n            doc.text('(____________________)', 140, finalY + 60);\r\n        } else {\r\n            doc.addPage();\r\n            doc.text('Mengetahui,', 140, 30);\r\n            doc.text('Koordinator Penilaian', 140, 36);\r\n            doc.text('(____________________)', 140, 60);\r\n        }\r\n\r\n        doc.save(`Laporan_Hasil_UKK_${new Date().toISOString().split('T')[0]}.pdf`);\r\n    };\r\n\r\n    const exportToExcel = () => {\r\n        // Prepare data with new requirements\r\n        const worksheetData: any[] = results.map((student, index) => {\r\n            return {\r\n                'No': index + 1,\r\n                'NIS': student.nis || '-',\r\n                'Nama Siswa': student.name.toUpperCase(),\r\n                'Kelas': student.class,\r\n                'Lomba': student.event_name || '-',\r\n                'Nilai Akhir': Number(student.final_score).toFixed(2),\r\n                'Predikat': student.final_score >= 75 ? 'KOMPETEN' : 'BELUM KOMPETEN'\r\n            };\r\n        });\r\n\r\n        const worksheet = XLSX.utils.json_to_sheet(worksheetData);\r\n\r\n        // Auto-width\r\n        const wscols = [\r\n            { wch: 5 },  // No\r\n            { wch: 15 }, // NIS\r\n            { wch: 35 }, // Nama\r\n            { wch: 15 }, // Kelas\r\n            { wch: 20 }, // Lomba\r\n            { wch: 12 }, // Nilai\r\n            { wch: 20 }, // Predikat\r\n        ];\r\n        worksheet['!cols'] = wscols;\r\n\r\n        // Add Footer \"Mengetahui...\"\r\n        const range = XLSX.utils.decode_range(worksheet['!ref']!);\r\n        const lastRow = range.e.r + 2; // Leave 1 empty row\r\n\r\n        XLSX.utils.sheet_add_aoa(worksheet, [\r\n            [\"Mengetahui,\"],\r\n            [\"Kepala Program Keahlian\"],\r\n            [\"\"],\r\n            [\"\"],\r\n            [\"(_______________________)\"]\r\n        ], { origin: { r: lastRow, c: 1 } }); // Start at Column B\r\n\r\n        const workbook = XLSX.utils.book_new();\r\n        XLSX.utils.book_append_sheet(workbook, worksheet, \"LAPORAN_UKK_2026\");\r\n\r\n        // Generate filename\r\n        const date = new Date().toISOString().split('T')[0];\r\n        const filename = `Laporan_UKK_IT_${date}.xlsx`;\r\n\r\n        XLSX.writeFile(workbook, filename);\r\n    };\r\n\r\n    // Auto-Refresh\r\n    useEffect(() => {\r\n        const interval = setInterval(fetchResults, 5000); // Poll every 5 seconds\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const getMaxScore = () => Math.max(...results.map(r => r.final_score), 100);\r\n\r\n    return (\r\n        <main className=\"dashboard-container min-h-screen py-12 bg-gray-50\">\r\n            {/* Header */}\r\n            <div className=\"bg-white shadow-sm border-b px-6 py-4 flex justify-between items-center sticky top-0 z-20\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <div className=\"bg-blue-600 p-2 rounded-lg text-white\">\r\n                        <Trophy size={20} />\r\n                    </div>\r\n                    <div>\r\n                        <h1 className=\"font-bold text-gray-800 text-lg\">Koordinator<span className=\"text-blue-600\">View</span></h1>\r\n                        <p className=\"text-xs text-gray-500\">Real-time Ranking & Recap</p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={handlePrintPDF}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm\"\r\n                    >\r\n                        <FileSpreadsheet size={16} />\r\n                        Cetak PDF\r\n                    </button>\r\n                    <button\r\n                        onClick={exportToExcel}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition-colors shadow-sm\"\r\n                    >\r\n                        <FileSpreadsheet size={16} />\r\n                        Export Excel\r\n                    </button>\r\n                    <button\r\n                        onClick={() => fetchResults()}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors\"\r\n                    >\r\n                        Refresh\r\n                    </button>\r\n                    <Link href=\"/\" className=\"px-4 py-2 text-sm font-medium text-gray-500 hover:text-red-500\">\r\n                        Exit\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"px-6 md:px-12 grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* LEFT: Leaderboard & Stats */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <div className=\"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden\">\r\n                        <div className=\"p-4 bg-gray-50 border-b border-gray-100 font-bold text-gray-700\">Leaderboard Tertinggi</div>\r\n                        <div className=\"p-0\">\r\n                            <table className=\"w-full text-sm\">\r\n                                <thead className=\"bg-white text-gray-500 uppercase text-xs font-semibold\">\r\n                                    <tr className=\"border-b border-gray-100\">\r\n                                        <th className=\"py-3 px-4 text-left w-12\">#</th>\r\n                                        <th className=\"py-3 px-4 text-left\">Siswa</th>\r\n                                        <th className=\"py-3 px-4 text-right\">Nilai Akhir</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {results.slice(0, 5).map((r, i) => (\r\n                                        <tr key={r.id} className=\"border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors\">\r\n                                            <td className=\"py-3 px-4\">\r\n                                                <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold \r\n                                                    ${i === 0 ? 'bg-yellow-100 text-yellow-700' :\r\n                                                        i === 1 ? 'bg-gray-200 text-gray-700' :\r\n                                                            i === 2 ? 'bg-orange-100 text-orange-700' : 'bg-gray-100 text-gray-500'}`}>\r\n                                                    {i + 1}\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"py-3 px-4 font-medium text-gray-900\">{r.name}</td>\r\n                                            <td className=\"py-3 px-4 text-right font-bold text-blue-600\">{r.final_score}</td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    {results.length === 0 && <tr><td colSpan={3} className=\"p-4 text-center text-gray-400\">Belum ada data.</td></tr>}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white border border-gray-200 rounded-2xl shadow-sm overflow-hidden\">\r\n                        <div className=\"p-4 bg-gray-50 border-b border-gray-100 font-bold text-gray-700\">Data Lengkap</div>\r\n                        <div className=\"max-h-[400px] overflow-y-auto\">\r\n                            <table className=\"w-full text-sm\">\r\n                                <thead className=\"bg-white text-gray-500 uppercase text-xs font-semibold sticky top-0\">\r\n                                    <tr className=\"border-b border-gray-100 bg-gray-50\">\r\n                                        <th className=\"py-3 px-4 text-left\">Nama</th>\r\n                                        <th className=\"py-3 px-4 text-left\">Kelas</th>\r\n                                        <th className=\"py-3 px-4 text-right\">Rata-Rata</th>\r\n                                        <th className=\"py-3 px-4 text-right\">Total</th>\r\n                                        <th className=\"py-3 px-4 text-center\">Status</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {results.map((student) => (\r\n                                        <tr key={student.id} className=\"border-b border-gray-50 hover:bg-gray-50\">\r\n                                            <td className=\"py-3 px-4 font-medium text-gray-900\">{student.name}</td>\r\n                                            <td className=\"py-3 px-4 text-gray-500\">{student.class}</td>\r\n                                            <td className=\"py-3 px-4 text-right font-bold text-blue-600\">{Number(student.final_score).toFixed(2)}</td>\r\n                                            <td className=\"py-3 px-4 text-right font-medium text-gray-700\">{Number(student.final_score).toFixed(2)}</td>\r\n                                            <td className=\"py-3 px-4 text-center\">\r\n                                                <span className={`px-2 py-1 rounded text-xs font-bold ${student.final_score >= 75 ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n                                                    {student.final_score >= 75 ? 'KOMPETEN' : 'BELUM KOMPETEN'}\r\n                                                </span>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* RIGHT: Visual Graphs */}\r\n                <div className=\"space-y-6\">\r\n                    <div className=\"bg-white border border-gray-200 rounded-2xl shadow-sm p-6\">\r\n                        <h3 className=\"font-bold text-gray-700 mb-4\">Distribusi Nilai</h3>\r\n                        <div className=\"space-y-3\">\r\n                            {results.slice(0, 8).map(student => (\r\n                                <div key={student.id}>\r\n                                    <div className=\"flex justify-between text-xs mb-1 font-medium\">\r\n                                        <span>{student.name}</span>\r\n                                        <span>{student.final_score}</span>\r\n                                    </div>\r\n                                    <div className=\"w-full bg-gray-100 rounded-full h-2.5 overflow-hidden\">\r\n                                        <div\r\n                                            className=\"bg-blue-600 h-2.5 rounded-full transition-all duration-1000 ease-out\"\r\n                                            style={{ width: `${(student.final_score / 100) * 100}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-gradient-to-br from-indigo-600 to-purple-700 rounded-2xl p-6 text-white text-center shadow-lg\">\r\n                        <p className=\"text-white/80 text-sm uppercase tracking-widest font-bold mb-1\">Rata-Rata Kelas</p>\r\n                        <h2 className=\"text-5xl font-bold mb-2\">\r\n                            {(results.reduce((a, b) => a + b.final_score, 0) / (results.length || 1)).toFixed(1)}\r\n                        </h2>\r\n                        <div className=\"inline-block bg-white/20 px-3 py-1 rounded-full text-xs font-medium\">\r\n                            {results.length} Siswa Dinilai\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}