{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  // Graceful fallback to prevent crash during build time if env missing\r\n  if (typeof window === 'undefined') {\r\n    console.warn('Supabase env vars missing on server');\r\n  } else {\r\n    throw new Error('Missing Supabase environment variables');\r\n  }\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl || '', supabaseAnonKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AASO,MAAM,WAAW,IAAA,8LAAY,EAAC,eAAe,IAAI,mBAAmB"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from 'next/image';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/utils/supabase';\r\nimport {\r\n    ShieldCheck,\r\n    ChevronRight,\r\n    Lock,\r\n    GraduationCap,\r\n} from 'lucide-react';\r\n\r\nexport default function Home() {\r\n    const router = useRouter();\r\n    const [accessKey, setAccessKey] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n    const [shake, setShake] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Clear auth on load\r\n        localStorage.removeItem('user_role');\r\n        localStorage.removeItem('access_rekap');\r\n    }, []);\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setErrorMsg('');\r\n\r\n        const cleanKey = accessKey.trim();\r\n\r\n        // Login Logic:\r\n        // We verify against the database.\r\n\r\n\r\n        if (!cleanKey) {\r\n            setErrorMsg('Harap masukkan kode akses.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // --- SIMPLIFIED QUERY (HARDCODE) ---\r\n            // Using 'key' to match database schema used in super-admin page\r\n            const { data, error } = await supabase\r\n                .from('access_keys')\r\n                .select('*')\r\n                .eq('key', cleanKey)\r\n                .single();\r\n\r\n            if (error) {\r\n                console.error(\"Login Query Error:\", error);\r\n                setErrorMsg('Kode akses tidak valid.');\r\n                setShake(true);\r\n                setTimeout(() => setShake(false), 500);\r\n            } else if (data) {\r\n                processLogin(data);\r\n            } else {\r\n                setErrorMsg('Kode akses tidak ditemukan.');\r\n                setShake(true);\r\n                setTimeout(() => setShake(false), 500);\r\n            }\r\n\r\n        } catch (err) {\r\n            console.error(\"[CRITICAL LOGIN ERROR]\", err);\r\n            setErrorMsg('Kesalahan Sistem Fatal.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const processLogin = async (user: any) => {\r\n        const dbRole = (user.role || '').toUpperCase();\r\n        console.log(`[LOGIN SUCCESS] Found: ${dbRole}`);\r\n\r\n        // SESSION SET\r\n        localStorage.setItem('user_role', user.role);\r\n\r\n        // ATTEMPT SERVER SYNC (Non-blocking)\r\n        try {\r\n            fetch('/login', {\r\n                method: 'POST',\r\n                body: JSON.stringify({ role: user.role, key: accessKey.trim() })\r\n            });\r\n        } catch (e) { console.error(e); }\r\n\r\n        // REDIRECT LOGIC\r\n        let targetPath = '';\r\n\r\n        if (dbRole.includes('JURI') || dbRole.includes('PANEL') || dbRole.includes('JUDGE')) {\r\n            targetPath = '/jury-room';\r\n        }\r\n        else if (dbRole.includes('KOORDINATOR') || dbRole.includes('AKADEMIK')) {\r\n            targetPath = '/koordinator-view';\r\n            localStorage.setItem('access_rekap', 'true');\r\n        }\r\n        else if (dbRole === 'SUPER ADMIN' || dbRole === 'SUPERADMIN') {\r\n            targetPath = '/super-admin';\r\n        }\r\n        else if (dbRole.includes('ADMIN')) {\r\n            targetPath = '/admin-dashboard';\r\n        }\r\n        else {\r\n            // Default fallback if role exists but unknown\r\n            targetPath = '/';\r\n            setErrorMsg(`Role '${user.role}' tidak memiliki halaman spesifik.`);\r\n            setShake(true);\r\n            setTimeout(() => setShake(false), 500);\r\n            return;\r\n        }\r\n\r\n        // FORCE REDIRECT\r\n        window.location.href = targetPath;\r\n    };\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden\">\r\n\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-blue-600/20 rounded-full blur-[100px]\"></div>\r\n                <div className=\"absolute top-[30%] right-[10%] w-[30%] h-[30%] bg-purple-600/20 rounded-full blur-[100px]\"></div>\r\n            </div>\r\n\r\n            <div className=\"bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl w-full max-w-md flex flex-col overflow-hidden relative z-10 transition-all duration-500\">\r\n\r\n                {/* Header */}\r\n                {/* Header */}\r\n                <div className=\"p-8 pb-0 text-center\">\r\n                    <div className=\"flex justify-center mb-6\">\r\n                        <div className=\"bg-white/10 p-6 rounded-2xl mb-6 inline-block shadow-lg border border-white/20 relative group overflow-hidden\">\r\n                            <div className=\"absolute inset-0 bg-gradient-to-tr from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n                            <GraduationCap size={64} className=\"text-blue-300 drop-shadow-[0_0_15px_rgba(147,197,253,0.5)] transform transition-transform duration-500 group-hover:scale-110 group-hover:rotate-3\" />\r\n                        </div>\r\n                    </div>\r\n                    <h1 className=\"text-3xl font-bold text-white mb-2 leading-tight\">\r\n                        Sistem Penilaian\r\n                        <span className=\"block text-blue-400 text-xl mt-1\">Ujian Kompetensi Keahlian</span>\r\n                    </h1>\r\n                    <p className=\"text-blue-200/80 text-sm\">Sistem Penilaian Digital Lantech</p>\r\n                </div>\r\n\r\n                {/* Login Form */}\r\n                <div className=\"p-8\">\r\n                    <form onSubmit={handleLogin} className={`space-y-6 ${shake ? 'animate-shake' : ''}`}>\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-semibold text-blue-100 ml-1\">Kode Akses</label>\r\n                            <div className=\"relative group\">\r\n                                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none transition-colors group-focus-within:text-blue-500 text-slate-400\">\r\n                                    <Lock size={20} />\r\n                                </div>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    value={accessKey}\r\n                                    onChange={(e) => setAccessKey(e.target.value)}\r\n                                    className=\"block w-full pl-12 pr-4 py-4 bg-white/90 border-0 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium\"\r\n                                    placeholder=\"Masukkan Kode Akses...\"\r\n                                    required\r\n                                    autoFocus\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {errorMsg && (\r\n                            <div className=\"p-4 bg-red-500/20 border border-red-500/30 text-red-200 rounded-xl text-sm flex items-center gap-2 animate-pulse\">\r\n                                <div className=\"bg-red-500/20 p-1 rounded-full\">\r\n                                    <ShieldCheck size={14} />\r\n                                </div>\r\n                                {errorMsg}\r\n                            </div>\r\n                        )}\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className={`w-full font-bold py-4 px-6 rounded-xl transform transition-all duration-200 flex items-center justify-center gap-2 ${loading ? 'bg-slate-500 cursor-not-allowed' : 'bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:shadow-lg hover:shadow-blue-500/30 hover:-translate-y-0.5'}`}\r\n                        >\r\n                            {loading ? (\r\n                                <>Processing...</>\r\n                            ) : (\r\n                                <>\r\n                                    Masuk Sekarang <ChevronRight size={20} />\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-8 pt-6 border-t border-white/10 text-center\">\r\n                        <p className=\"text-xs text-blue-200/40\">\r\n                            Â© 2026 Lantech Digital\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <style jsx global>{`\r\n                @keyframes shake {\r\n                    0%, 100% { transform: translateX(0); }\r\n                    25% { transform: translateX(-5px); }\r\n                    75% { transform: translateX(5px); }\r\n                }\r\n                .animate-shake {\r\n                    animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both;\r\n                }\r\n            `}</style>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}