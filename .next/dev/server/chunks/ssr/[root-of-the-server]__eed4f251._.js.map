{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  // Graceful fallback to prevent crash during build time if env missing\r\n  if (typeof window === 'undefined') {\r\n    console.warn('Supabase env vars missing on server');\r\n  } else {\r\n    throw new Error('Missing Supabase environment variables');\r\n  }\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl || '', supabaseAnonKey || '');\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AASO,MAAM,WAAW,IAAA,8LAAY,EAAC,eAAe,IAAI,mBAAmB"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Arifm/Documents/Lantech%20Digital/ukk-scoring-app/app/super-login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '@/utils/supabase';\r\nimport { Lock, Crown, ChevronRight, ShieldAlert } from 'lucide-react';\r\n\r\nexport default function SuperLogin() {\r\n    const router = useRouter();\r\n    const [accessKey, setAccessKey] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [errorMsg, setErrorMsg] = useState('');\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setErrorMsg('');\r\n\r\n        const cleanKey = accessKey.trim();\r\n\r\n        // --- HARDCODED BACKDOOR REMOVED FOR SECURITY ---\r\n        // Authentication now strictly relies on `super_admin_users` table below.\r\n\r\n        try {\r\n            // Check Super Admin Users\r\n            const { data: saUser } = await supabase\r\n                .from('super_admin_users')\r\n                .select('*')\r\n                .eq('access_key', cleanKey)\r\n                .single();\r\n\r\n            if (saUser) {\r\n                localStorage.setItem('user_role', 'Super Admin');\r\n                // Cookie for Middleware\r\n                document.cookie = \"user_role=SUPERADMIN; path=/; max-age=3600\";\r\n\r\n                router.push('/super-admin');\r\n                return;\r\n            }\r\n\r\n            // Also check Access Keys for 'SUPERADMIN' role\r\n            const { data: dbKeys } = await supabase\r\n                .from('access_keys')\r\n                .select('*')\r\n                .ilike('key_code', cleanKey);\r\n\r\n            const match = dbKeys?.find(k => k.role?.toUpperCase() === 'SUPERADMIN' || k.role?.toUpperCase() === 'SUPER ADMIN');\r\n\r\n            if (match) {\r\n                localStorage.setItem('user_role', 'Super Admin');\r\n                // Cookie for Middleware\r\n                document.cookie = \"user_role=SUPERADMIN; path=/; max-age=3600\";\r\n\r\n                router.push('/super-admin');\r\n                return;\r\n            }\r\n\r\n            setErrorMsg('Akses Ditolak: Kode tidak valid.');\r\n        } catch (err) {\r\n            setErrorMsg('Terjadi kesalahan sistem.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-slate-900 flex items-center justify-center p-4\">\r\n            <div className=\"bg-slate-800 border border-slate-700 p-8 rounded-2xl w-full max-w-md shadow-2xl\">\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"bg-purple-500/20 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 border border-purple-500/50\">\r\n                        <Crown size={32} className=\"text-purple-400\" />\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-white\">Super Access</h1>\r\n                    <p className=\"text-slate-400 text-sm\">Restricted Area</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                    <div>\r\n                        <div className=\"relative\">\r\n                            <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500\" size={20} />\r\n                            <input\r\n                                type=\"password\"\r\n                                value={accessKey}\r\n                                onChange={(e) => setAccessKey(e.target.value)}\r\n                                className=\"w-full bg-slate-900 border border-slate-700 rounded-xl py-3 pl-12 text-white focus:outline-none focus:border-purple-500 transition-colors\"\r\n                                placeholder=\"Super Key...\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {errorMsg && (\r\n                        <div className=\"bg-red-500/10 border border-red-500/20 p-3 rounded-lg text-red-400 text-sm flex items-center gap-2\">\r\n                            <ShieldAlert size={16} /> {errorMsg}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2\"\r\n                    >\r\n                        {loading ? 'Verifying...' : <>Enter System <ChevronRight size={20} /></>}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AALA;;;;;;AAOe,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,cAAc,OAAO;QACvB,EAAE,cAAc;QAChB,WAAW;QACX,YAAY;QAEZ,MAAM,WAAW,UAAU,IAAI;QAE/B,kDAAkD;QAClD,yEAAyE;QAEzE,IAAI;YACA,0BAA0B;YAC1B,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,6HAAQ,CAClC,IAAI,CAAC,qBACL,MAAM,CAAC,KACP,EAAE,CAAC,cAAc,UACjB,MAAM;YAEX,IAAI,QAAQ;gBACR,aAAa,OAAO,CAAC,aAAa;gBAClC,wBAAwB;gBACxB,SAAS,MAAM,GAAG;gBAElB,OAAO,IAAI,CAAC;gBACZ;YACJ;YAEA,+CAA+C;YAC/C,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,6HAAQ,CAClC,IAAI,CAAC,eACL,MAAM,CAAC,KACP,KAAK,CAAC,YAAY;YAEvB,MAAM,QAAQ,QAAQ,KAAK,CAAA,IAAK,EAAE,IAAI,EAAE,kBAAkB,gBAAgB,EAAE,IAAI,EAAE,kBAAkB;YAEpG,IAAI,OAAO;gBACP,aAAa,OAAO,CAAC,aAAa;gBAClC,wBAAwB;gBACxB,SAAS,MAAM,GAAG;gBAElB,OAAO,IAAI,CAAC;gBACZ;YACJ;YAEA,YAAY;QAChB,EAAE,OAAO,KAAK;YACV,YAAY;QAChB,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,8OAAC;QAAK,WAAU;kBACZ,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,6MAAK;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;sCAE/B,8OAAC;4BAAG,WAAU;sCAAgC;;;;;;sCAC9C,8OAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;8BAG1C,8OAAC;oBAAK,UAAU;oBAAa,WAAU;;sCACnC,8OAAC;sCACG,cAAA,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,0MAAI;wCAAC,WAAU;wCAA0D,MAAM;;;;;;kDAChF,8OAAC;wCACG,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wCAC5C,WAAU;wCACV,aAAY;;;;;;;;;;;;;;;;;wBAKvB,0BACG,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,mOAAW;oCAAC,MAAM;;;;;;gCAAM;gCAAE;;;;;;;sCAInC,8OAAC;4BACG,MAAK;4BACL,UAAU;4BACV,WAAU;sCAET,UAAU,+BAAiB;;oCAAE;kDAAa,8OAAC,sOAAY;wCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvF"}}]
}