module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},11269,a=>{"use strict";let b=(0,a.i(70106).default)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],11269)},90821,a=>{"use strict";let b=(0,a.i(70106).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],90821)},26017,a=>{"use strict";let b=(0,a.i(70106).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],26017)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},23680,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(64193),f=a.i(70106);let g=(0,f.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),h=(0,f.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),i=(0,f.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var j=a.i(11269),k=a.i(90821),l=a.i(26017);let m=(0,f.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),n=(0,f.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var o=a.i(81560),p=a.i(75750);function q(){let a=(0,d.useRouter)(),[f,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)("");D.length,D.reduce((a,b)=>{let c=b.events?.event_name||"Unassigned";return a[c]=(a[c]||0)+1,a},{}),(0,c.useEffect)(()=>{let b=localStorage.getItem("user_role");b&&(b.includes("Admin")||b.includes("ADMIN")||"SUPERADMIN"===b)?H():a.push("/")},[a]);let H=async()=>{q(!0);try{let{data:a}=await e.supabase.from("events").select("*");a&&C(a);let{data:b,error:c}=await e.supabase.from("students").select("*").order("created_at",{ascending:!1});b&&E(b)}catch(a){console.error(a)}q(!1)},I=async a=>{if(a.preventDefault(),t.trim()&&v.trim()){q(!0);try{let a={name:t.trim(),class:v.trim(),nis:x.trim()};z&&(a.event_id=z);let{error:b}=await e.supabase.from("students").insert([a]);if(b)throw b;s({message:"Data Peserta Berhasil Disimpan",type:"success"}),u(""),w(""),y(""),H()}catch(a){s({message:a.message||"Gagal menyimpan data",type:"error"})}finally{q(!1),setTimeout(()=>s(null),3e3)}}},J=async a=>{confirm("Hapus siswa ini?")&&(q(!0),await e.supabase.from("students").delete().eq("id",a),H(),q(!1))};return(0,b.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,b.jsxs)("nav",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:(0,b.jsx)(g,{size:20})}),(0,b.jsxs)("span",{className:"font-bold text-gray-800 text-lg",children:["Admin",(0,b.jsx)("span",{className:"text-blue-600",children:"Dashboard"})]})]}),(0,b.jsxs)("button",{onClick:()=>{localStorage.clear(),a.push("/")},className:"flex items-center gap-2 text-gray-500 hover:text-red-600 transition-colors font-medium text-sm",children:[(0,b.jsx)(i,{size:18})," Sign Out"]})]}),(0,b.jsx)("div",{className:"max-w-2xl mx-auto py-12 px-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden h-fit",children:[(0,b.jsxs)("div",{className:"bg-blue-600 p-6 text-white text-center",children:[(0,b.jsx)(h,{size:48,className:"mx-auto mb-4 opacity-90"}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Input Data Peserta"}),(0,b.jsx)("p",{className:"opacity-90 text-blue-100 mt-1",children:"Masukkan data siswa/mahasiswa baru"})]}),(0,b.jsxs)("div",{className:"p-8",children:[r&&(0,b.jsxs)("div",{className:`mb-6 p-4 rounded-xl flex items-center gap-3 border ${"success"===r.type?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:["success"===r.type?(0,b.jsx)(j.CheckCircle2,{size:20}):(0,b.jsx)(k.AlertCircle,{size:20}),(0,b.jsx)("span",{className:"font-medium",children:r.message})]}),(0,b.jsxs)("form",{onSubmit:I,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nama Lengkap"}),(0,b.jsx)("input",{type:"text",value:t,onChange:a=>u(a.target.value),placeholder:"Contoh: Ahmad Dahlan",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"NIM / ID"}),(0,b.jsx)("input",{type:"text",value:x,onChange:a=>y(a.target.value),placeholder:"12345678",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Kelas / Prodi"}),(0,b.jsx)("input",{type:"text",value:v,onChange:a=>w(a.target.value),placeholder:"XII RPL 1",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Pilih Lomba (Opsional)"}),(0,b.jsxs)("select",{value:z,onChange:a=>A(a.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",children:[(0,b.jsx)("option",{value:"",children:"-- Tidak Ada --"}),B.map(a=>(0,b.jsx)("option",{value:a.id,children:a.event_name},a.id))]})]}),(0,b.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2",children:f?(0,b.jsx)(l.Loader2,{className:"animate-spin"}):"Simpan Data Peserta"})]}),(0,b.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[(0,b.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[(0,b.jsx)(m,{size:16})," Import via Excel/CSV"]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{type:"button",onClick:()=>{let a=encodeURI("data:text/csv;charset=utf-8,Name,Class,NIS\nJohn Doe,XII RPL 1,12345\nJane Smith,XII TKJ 2,67890"),b=document.createElement("a");b.setAttribute("href",a),b.setAttribute("download","template_siswa.csv"),document.body.appendChild(b),b.click(),document.body.removeChild(b)},className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 px-3 py-2 rounded-lg font-medium transition-colors",children:"Download Template"})}),(0,b.jsx)("input",{type:"file",accept:".csv, .xlsx, .xls",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=async a=>{let b=a.target?.result,c=p.read(b,{type:"binary"}),d=c.SheetNames[0],f=c.Sheets[d],g=p.utils.sheet_to_json(f).map(a=>{let b=b=>{for(let c of b){let b=Object.keys(a).find(a=>a.toLowerCase()===c.toLowerCase());if(b)return a[b]}return""};return{name:b(["name","nama","nama siswa","student"]),class:b(["class","kelas","prodi","rombian"]),nis:b(["nis","nim","id","nomor induk"])}}).filter(a=>a.name&&a.class);if(g.length>0){q(!0);let{error:a}=await e.supabase.from("students").insert(g);a?s({message:"Gagal Import: "+(a.message||"Check kolom CSV"),type:"error"}):(s({message:`Berhasil import ${g.length} siswa!`,type:"success"}),H()),q(!1)}else s({message:"Format CSV tidak dikenali atau kosong.",type:"error"})},c.readAsBinaryString(b)},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mt-2"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Format: Kolom Name, Class, NIS"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase",children:"Total Peserta"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:D.length})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,b.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase",children:"Lomba Aktif"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:B.length})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Cari nama atau kelas...",value:F,onChange:a=>G(a.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-50 outline-none"})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden max-h-[600px] overflow-y-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-gray-50 text-gray-600 font-bold uppercase text-xs sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3",children:"Nama"}),(0,b.jsx)("th",{className:"px-6 py-3",children:"Kelas"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right",children:"Aksi"})]})}),(0,b.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[D.filter(a=>a.name.toLowerCase().includes(F.toLowerCase())||a.class&&a.class.toLowerCase().includes(F.toLowerCase())||a.nis&&a.nis.toLowerCase().includes(F.toLowerCase())).map(a=>(0,b.jsxs)("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[(0,b.jsxs)("td",{className:"px-6 py-4 font-medium text-gray-900",children:[a.name,(0,b.jsx)("div",{className:"text-xs text-gray-400",children:a.nis})]}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-500",children:a.class}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsx)("button",{onClick:()=>J(a.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:(0,b.jsx)(o.Trash2,{size:16})})})]},a.id)),0===D.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"px-6 py-8 text-center text-gray-400 italic",children:"Belum ada data siswa."})})]})]})})]})]})})]})}a.s(["default",()=>q],23680)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7ad5f6dd._.js.map