module.exports=[59705,a=>{"use strict";var b=a.i(87924),c=a.i(71987),d=a.i(72131),e=a.i(50944),f=a.i(64193),g=a.i(4416),h=a.i(70106);let i=(0,h.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var j=a.i(81560);let k=(0,h.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var l=a.i(83077);let m=(0,h.default)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);var n=a.i(26017),o=a.i(11269),p=a.i(90821);let q=(0,h.default)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),r=(0,h.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function s(){let a=(0,e.useRouter)(),[h,s]=(0,d.useState)(""),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)(""),[x,y]=(0,d.useState)([]),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)([]),[D,E]=(0,d.useState)([]),[F,G]=(0,d.useState)(""),[H,I]=(0,d.useState)(""),[J,K]=(0,d.useState)(""),[L,M]=(0,d.useState)(""),[N,O]=(0,d.useState)(""),[P,Q]=(0,d.useState)("Juri"),[R,S]=(0,d.useState)(!1),[T,U]=(0,d.useState)(null);(0,d.useEffect)(()=>{let a=sessionStorage.getItem("super_admin_auth"),b=localStorage.getItem("user_role");("true"===a||"Super Admin"===b||"SUPERADMIN"===b)&&(u(!0),V())},[]),(0,d.useEffect)(()=>{t&&V()},[t]),(0,d.useEffect)(()=>{z?W(z):C([])},[z]);let V=async()=>{S(!0);try{let{data:a,error:b}=await f.supabase.from("events").select("*").order("created_at",{ascending:!1});if(b)throw b;y(a||[]);let{data:c,error:d}=await f.supabase.from("access_keys").select("*").order("created_at",{ascending:!1});if(d)throw d;E(c||[])}catch(a){ac(a.message||"Gagal memuat data utama.","error")}finally{S(!1)}},W=async a=>{S(!0);try{let{data:b,error:c}=await f.supabase.from("event_criteria").select("*").eq("event_id",a);if(c)throw c;C(b||[])}catch(a){ac(a.message||"Gagal memuat kriteria.","error")}finally{S(!1)}},X=async b=>{if(b.preventDefault(),F.trim()){S(!0);try{let{error:b}=await f.supabase.from("events").insert([{event_name:F.trim()}]);if(b)throw Error(`Tabel Events Error: ${b.message}`);G(""),ac("Lomba berhasil ditambahkan!","success"),V(),a.refresh()}catch(a){ac(a.message,"error")}finally{S(!1)}}},Y=async b=>{if(confirm("Hapus lomba ini? Data kriteria juga akan terhapus.")){S(!0);try{let{error:c}=await f.supabase.from("events").delete().eq("id",b);if(c)throw Error(`Gagal menghapus event: ${c.message}`);ac("Lomba berhasil dihapus.","success"),z===b&&A(""),V(),a.refresh()}catch(a){ac(a.message,"error")}finally{S(!1)}}},Z=async b=>{if(b.preventDefault(),z&&H.trim()){S(!0);try{let{error:b}=await f.supabase.from("event_criteria").insert([{event_id:z,criteria_name:H.trim(),weight:J?parseInt(J):0}]);if(b)throw Error(`Tabel Criteria Error: ${b.message}`);I(""),K(""),ac("Kriteria berhasil ditambahkan!","success"),W(z),a.refresh()}catch(a){ac(a.message,"error")}finally{S(!1)}}},$=async b=>{if(confirm("Hapus kriteria ini?")){S(!0);try{let{error:c}=await f.supabase.from("event_criteria").delete().eq("id",b);if(c)throw Error(`Gagal menghapus kriteria: ${c.message}`);ac("Kriteria berhasil dihapus.","success"),W(z),a.refresh()}catch(a){ac(a.message,"error")}finally{S(!1)}}},_=async b=>{if(b.preventDefault(),L.trim()&&N.trim()){S(!0);try{console.log("Attempting Insert Key:",{name:L,key:N,role:P});let{data:b,error:c}=await f.supabase.from("access_keys").insert([{name:L.trim(),key:N.trim(),role:P,is_active:!0}]).select();if(c)throw console.error("Supabase Insert Error:",c),Error(c.message+(c.details?` (${c.details})`:""));console.log("Insert Success:",b),M(""),O(""),ac("Data Berhasil Disinkronkan ke Server","success"),V(),a.refresh()}catch(a){console.error("Catch Block Error:",a),ac(`Gagal Tambah User: ${a.message}`,"error")}finally{S(!1)}}},aa=async b=>{if(confirm("Hapus akses user ini?")){S(!0);try{let{error:c}=await f.supabase.from("access_keys").delete().eq("id",b);if(c)throw Error(`Gagal menghapus key: ${c.message}`);ac("User berhasil dihapus.","success"),V(),a.refresh()}catch(a){ac(a.message,"error")}finally{S(!1)}}},ab=async()=>{if(confirm("Hati-hati, aksi ini tidak bisa dibatalkan! Apakah Anda yakin ingin MENGHAPUS SELURUH DATA DATABASE?")&&confirm("KONFIRMASI TERAKHIR: Data Siswa, Nilai, Lomba, Kriteria, dan User (Kecuali Super Admin) akan hilang permanen. Lanjutkan?")){if("RESET"!==prompt('Ketik "RESET" untuk konfirmasi penghapusan:'))return void alert("Reset dibatalkan. Kata kunci salah.");S(!0);try{await f.supabase.from("scores").delete().neq("id",0),await f.supabase.from("students").delete().neq("id",0),await f.supabase.from("event_criteria").delete().neq("id",0),await f.supabase.from("events").delete().neq("id",0);let{error:a}=await f.supabase.from("access_keys").delete().neq("role","Super Admin");if(a)throw a;ac("DATABASE BERHASIL DI-RESET TOTAL.","success"),V()}catch(a){ac(`Gagal Reset: ${a.message}`,"error")}finally{S(!1)}}},ac=(a,b)=>{U({message:a,type:b}),setTimeout(()=>U(null),4e3)};return t?(0,b.jsxs)("main",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,b.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative w-10 h-10",children:(0,b.jsx)(c.default,{src:"/logo.png",alt:"Lantech",fill:!0,className:"object-contain"})}),(0,b.jsx)("span",{className:"font-bold text-xl text-gray-900",children:"Sistem Penilaian"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("button",{onClick:ab,className:"text-red-600 hover:text-red-700 font-bold text-sm bg-red-50 hover:bg-red-100 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[(0,b.jsx)(j.Trash2,{size:16})," RESET DATABASE"]}),(0,b.jsx)("button",{onClick:()=>{u(!1),sessionStorage.removeItem("super_admin_auth"),s("")},className:"text-gray-500 hover:text-red-600 font-medium text-sm transition-colors",children:"Sign Out"})]})]})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[T&&(0,b.jsxs)("div",{className:`fixed top-20 right-4 z-50 px-6 py-4 rounded-xl shadow-lg flex items-center gap-3 animate-in slide-in-from-right-5 
                        ${"success"===T.type?"bg-green-50 text-green-700 border border-green-200":"warning"===T.type?"bg-yellow-50 text-yellow-700 border border-yellow-200":"bg-red-50 text-red-700 border border-red-200"}`,children:["success"===T.type?(0,b.jsx)(o.CheckCircle2,{size:20}):(0,b.jsx)(p.AlertCircle,{size:20}),(0,b.jsx)("span",{className:"font-medium",children:T.message})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-4",children:[(0,b.jsx)(l.Trophy,{className:"w-5 h-5 text-blue-500"})," Kelola Lomba"]}),(0,b.jsxs)("form",{onSubmit:X,className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:F,onChange:a=>G(a.target.value),placeholder:"Nama Lomba...",className:"flex-1 px-4 py-2 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none text-sm transition-all"}),(0,b.jsx)("button",{type:"submit",disabled:R,className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R?(0,b.jsx)(n.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsx)(i,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,b.jsx)("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50",children:(0,b.jsx)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Daftar Lomba"})}),(0,b.jsx)("div",{className:"max-h-[500px] overflow-y-auto",children:0===x.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-400 text-sm",children:"Belum ada lomba."}):(0,b.jsx)("ul",{className:"divide-y divide-gray-100",children:x.map(a=>(0,b.jsxs)("li",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors flex items-center justify-between group 
                                                ${z===a.id?"bg-blue-50/50 border-l-4 border-blue-500":""}`,onClick:()=>A(a.id),children:[(0,b.jsx)("span",{className:`font-medium text-sm ${z===a.id?"text-blue-700":"text-gray-700"}`,children:a.event_name}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),Y(a.id)},className:"text-gray-300 hover:text-red-500 p-2 transition-colors",title:"Hapus Lomba",children:(0,b.jsx)(j.Trash2,{size:16})})]},a.id))})})]})]}),(0,b.jsx)("div",{className:"lg:col-span-5 space-y-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 min-h-[600px] flex flex-col",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2 mb-6",children:[(0,b.jsx)(m,{className:"w-5 h-5 text-purple-500"})," Kriteria Penilaian"]}),z?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6 p-4 bg-purple-50 rounded-xl border border-purple-100",children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-purple-800 mb-3 uppercase tracking-wide",children:"Tambah Kriteria"}),(0,b.jsxs)("form",{onSubmit:Z,className:"space-y-3",children:[(0,b.jsx)("input",{type:"text",value:H,onChange:a=>I(a.target.value),placeholder:"Nama Kriteria...",className:"w-full px-4 py-2 rounded-lg border border-purple-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-100 outline-none text-sm transition-all"}),(0,b.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-purple-700 mb-1 block",children:"Bobot Nilai"}),(0,b.jsx)("input",{type:"number",value:J,onChange:a=>K(a.target.value),placeholder:"0-100",className:"w-full px-4 py-2 rounded-lg border border-purple-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-100 outline-none text-sm transition-all"})]}),(0,b.jsx)("button",{type:"submit",disabled:R,className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors h-[42px]",children:R?(0,b.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i,{size:16})," Tambah"]})})]})]})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Daftar Kriteria"}),0===B.length?(0,b.jsx)("p",{className:"text-gray-400 text-sm italic",children:"Belum ada kriteria."}):(0,b.jsx)("ul",{className:"space-y-2",children:B.map(a=>(0,b.jsxs)("li",{className:"bg-white border border-gray-100 p-3 rounded-lg flex items-center justify-between shadow-sm group",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-800 text-sm",children:a.criteria_name}),a.weight&&(0,b.jsxs)("span",{className:"text-xs text-purple-600 bg-purple-50 px-2 py-0.5 rounded-full font-medium",children:["Bobot: ",a.weight]})]}),(0,b.jsx)("button",{onClick:()=>$(a.id),className:"text-gray-300 hover:text-red-500 p-1 opacity-0 group-hover:opacity-100 transition-all",title:"Hapus Kriteria",children:(0,b.jsx)(j.Trash2,{size:14})})]},a.id))})]})]}):(0,b.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-400 p-8 border-2 border-dashed border-gray-100 rounded-xl",children:[(0,b.jsx)(l.Trophy,{className:"w-12 h-12 mb-4 text-gray-200"}),(0,b.jsx)("p",{children:"Pilih lomba di menu sebelah kiri."})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-3 space-y-6",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 flex flex-col h-full max-h-[800px]",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(k,{className:"w-5 h-5 text-green-500"})," Akses User"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kelola Admin, Juri, & Kaprodi"})]}),(0,b.jsx)("div",{className:"p-4 bg-green-50 border-b border-green-100",children:(0,b.jsxs)("form",{onSubmit:_,className:"space-y-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(r,{className:"absolute left-3 top-2.5 w-4 h-4 text-green-400"}),(0,b.jsx)("input",{type:"text",value:L,onChange:a=>M(a.target.value),placeholder:"Nama Lengkap",className:"w-full pl-9 pr-3 py-2 rounded-lg border border-green-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 outline-none text-xs transition-all"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q,{className:"absolute left-3 top-2.5 w-4 h-4 text-green-400"}),(0,b.jsx)("input",{type:"text",value:N,onChange:a=>O(a.target.value),placeholder:"Kode Unik (e.g. juri123)",className:"w-full pl-9 pr-3 py-2 rounded-lg border border-green-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 outline-none text-xs transition-all"})]}),(0,b.jsxs)("select",{value:P,onChange:a=>Q(a.target.value),className:"w-full px-3 py-2 rounded-lg border border-green-200 focus:border-green-500 focus:ring-2 focus:ring-green-100 outline-none text-xs bg-white transition-all cursor-pointer",children:[(0,b.jsx)("option",{value:"Juri",children:"Juri"}),(0,b.jsx)("option",{value:"Koordinator Akademik",children:"Koordinator Akademik"}),(0,b.jsx)("option",{value:"Admin Biasa",children:"Admin Biasa"}),(0,b.jsx)("option",{value:"Super Admin",children:"Super Admin"})]}),(0,b.jsx)("button",{type:"submit",disabled:R,className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-xs font-bold transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:R?(0,b.jsx)(n.Loader2,{className:"w-3 h-3 animate-spin"}):(0,b.jsx)("span",{children:"+ Tambah User"})})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:(0,b.jsx)("ul",{className:"space-y-3",children:D.map(a=>(0,b.jsxs)("li",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100 flex flex-col gap-1 relative group hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("span",{className:"font-mono text-[10px] font-bold text-gray-600 bg-white px-2 py-0.5 rounded border border-gray-200",children:a.key}),(0,b.jsx)("span",{className:`text-[9px] uppercase font-bold px-1.5 py-0.5 rounded 
                                                    ${"Juri"===a.role?"bg-blue-100 text-blue-700":"Koordinator Akademik"===a.role?"bg-green-100 text-green-700":"Admin Biasa"===a.role?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:a.role})]}),(0,b.jsx)("p",{className:"text-xs text-gray-800 truncate font-semibold",children:a.name}),(0,b.jsx)("button",{onClick:()=>aa(a.id),className:"absolute bottom-2 right-2 text-gray-300 hover:text-red-500 transition-colors bg-white rounded-full p-1 shadow-sm border border-gray-100",title:"Hapus User",children:(0,b.jsx)(j.Trash2,{size:14})})]},a.id))})})]})})]})]})]}):(0,b.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md bg-white p-8 rounded-3xl shadow-xl border border-gray-100 text-center",children:[(0,b.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,b.jsx)(g.ShieldCheck,{className:"w-8 h-8 text-red-600"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Restricted Access"}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"Enter Super Admin Credentials"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),"LantechSuperAdmin2026"===h.trim()?(u(!0),sessionStorage.setItem("super_admin_auth","true"),localStorage.setItem("user_role","Super Admin"),w("")):w("Kode Super Admin Salah")},className:"space-y-4",children:[(0,b.jsx)("input",{type:"password",value:h,onChange:a=>{s(a.target.value),w("")},placeholder:"Access Code",className:"w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-red-500 focus:ring-2 focus:ring-red-200 outline-none transition-all text-center text-lg tracking-widest"}),v&&(0,b.jsx)("p",{className:"text-red-500 text-sm font-medium animate-pulse",children:v}),(0,b.jsx)("button",{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg active:scale-95",children:"Unlock Dashboard"})]})]})})}a.s(["default",()=>s],59705)}];

//# sourceMappingURL=app_super-admin_page_tsx_41b34eb5._.js.map