(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65286,e=>{"use strict";let s=(0,e.i(75254).default)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>s],65286)},98791,e=>{"use strict";let s=(0,e.i(75254).default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],98791)},29377,e=>{"use strict";let s=(0,e.i(75254).default)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],29377)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},7581,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(56426),r=e.i(75254);let i=(0,r.default)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),n=(0,r.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),d=(0,r.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var o=e.i(65286),c=e.i(98791),x=e.i(29377);let m=(0,r.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),u=(0,r.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var h=e.i(27612),y=e.i(70016);function p(){let e=(0,a.useRouter)(),[r,p]=(0,t.useState)(!1),[b,g]=(0,t.useState)(null),[f,j]=(0,t.useState)(""),[v,N]=(0,t.useState)(""),[k,w]=(0,t.useState)(""),[C,S]=(0,t.useState)(""),[L,I]=(0,t.useState)([]),[A,D]=(0,t.useState)([]),[P,T]=(0,t.useState)("");A.length,A.reduce((e,s)=>{let t=s.events?.event_name||"Unassigned";return e[t]=(e[t]||0)+1,e},{}),(0,t.useEffect)(()=>{let s=localStorage.getItem("user_role");s&&(s.includes("Admin")||s.includes("ADMIN")||"SUPERADMIN"===s)?z():e.push("/")},[e]);let z=async()=>{p(!0);try{let{data:e}=await l.supabase.from("events").select("*");e&&I(e);let{data:s,error:t}=await l.supabase.from("students").select("*").order("created_at",{ascending:!1});s&&D(s)}catch(e){console.error(e)}p(!1)},M=async e=>{if(e.preventDefault(),f.trim()&&v.trim()){p(!0);try{let e={name:f.trim(),class:v.trim(),nis:k.trim()};C&&(e.event_id=C);let{error:s}=await l.supabase.from("students").insert([e]);if(s)throw s;g({message:"Data Peserta Berhasil Disimpan",type:"success"}),j(""),N(""),w(""),z()}catch(e){g({message:e.message||"Gagal menyimpan data",type:"error"})}finally{p(!1),setTimeout(()=>g(null),3e3)}}},R=async e=>{confirm("Hapus siswa ini?")&&(p(!0),await l.supabase.from("students").delete().eq("id",e),z(),p(!1))};return(0,s.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("nav",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"bg-blue-600 p-2 rounded-lg text-white",children:(0,s.jsx)(i,{size:20})}),(0,s.jsxs)("span",{className:"font-bold text-gray-800 text-lg",children:["Admin",(0,s.jsx)("span",{className:"text-blue-600",children:"Dashboard"})]})]}),(0,s.jsxs)("button",{onClick:()=>{localStorage.clear(),e.push("/")},className:"flex items-center gap-2 text-gray-500 hover:text-red-600 transition-colors font-medium text-sm",children:[(0,s.jsx)(d,{size:18})," Sign Out"]})]}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto py-12 px-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden h-fit",children:[(0,s.jsxs)("div",{className:"bg-blue-600 p-6 text-white text-center",children:[(0,s.jsx)(n,{size:48,className:"mx-auto mb-4 opacity-90"}),(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Input Data Peserta"}),(0,s.jsx)("p",{className:"opacity-90 text-blue-100 mt-1",children:"Masukkan data siswa/mahasiswa baru"})]}),(0,s.jsxs)("div",{className:"p-8",children:[b&&(0,s.jsxs)("div",{className:`mb-6 p-4 rounded-xl flex items-center gap-3 border ${"success"===b.type?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:["success"===b.type?(0,s.jsx)(o.CheckCircle2,{size:20}):(0,s.jsx)(c.AlertCircle,{size:20}),(0,s.jsx)("span",{className:"font-medium",children:b.message})]}),(0,s.jsxs)("form",{onSubmit:M,className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Nama Lengkap"}),(0,s.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"Contoh: Ahmad Dahlan",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"NIM / ID"}),(0,s.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:"12345678",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Kelas / Prodi"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"XII RPL 1",className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Pilih Lomba (Opsional)"}),(0,s.jsxs)("select",{value:C,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 outline-none focus:border-blue-500 transition-all",children:[(0,s.jsx)("option",{value:"",children:"-- Tidak Ada --"}),L.map(e=>(0,s.jsx)("option",{value:e.id,children:e.event_name},e.id))]})]}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2",children:r?(0,s.jsx)(x.Loader2,{className:"animate-spin"}):"Simpan Data Peserta"})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-100",children:[(0,s.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[(0,s.jsx)(m,{size:16})," Import via Excel/CSV"]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("button",{type:"button",onClick:()=>{let e=encodeURI("data:text/csv;charset=utf-8,Name,Class,NIS\nJohn Doe,XII RPL 1,12345\nJane Smith,XII TKJ 2,67890"),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download","template_siswa.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-600 px-3 py-2 rounded-lg font-medium transition-colors",children:"Download Template"})}),(0,s.jsx)("input",{type:"file",accept:".csv, .xlsx, .xls",onChange:e=>{let s=e.target.files?.[0];if(!s)return;let t=new FileReader;t.onload=async e=>{let s=e.target?.result,t=y.read(s,{type:"binary"}),a=t.SheetNames[0],r=t.Sheets[a],i=y.utils.sheet_to_json(r).map(e=>{let s=s=>{for(let t of s){let s=Object.keys(e).find(e=>e.toLowerCase()===t.toLowerCase());if(s)return e[s]}return""};return{name:s(["name","nama","nama siswa","student"]),class:s(["class","kelas","prodi","rombian"]),nis:s(["nis","nim","id","nomor induk"])}}).filter(e=>e.name&&e.class);if(i.length>0){p(!0);let{error:e}=await l.supabase.from("students").insert(i);e?g({message:"Gagal Import: "+(e.message||"Check kolom CSV"),type:"error"}):(g({message:`Berhasil import ${i.length} siswa!`,type:"success"}),z()),p(!1)}else g({message:"Format CSV tidak dikenali atau kosong.",type:"error"})},t.readAsBinaryString(s)},className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 mt-2"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Format: Kolom Name, Class, NIS"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,s.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase",children:"Total Peserta"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:A.length})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,s.jsx)("p",{className:"text-gray-500 text-xs font-bold uppercase",children:"Lomba Aktif"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:L.length})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(u,{className:"absolute left-3 top-3 text-gray-400",size:20}),(0,s.jsx)("input",{type:"text",placeholder:"Cari nama atau kelas...",value:P,onChange:e=>T(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-50 outline-none"})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden max-h-[600px] overflow-y-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-gray-600 font-bold uppercase text-xs sticky top-0",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3",children:"Nama"}),(0,s.jsx)("th",{className:"px-6 py-3",children:"Kelas"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right",children:"Aksi"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[A.filter(e=>e.name.toLowerCase().includes(P.toLowerCase())||e.class&&e.class.toLowerCase().includes(P.toLowerCase())||e.nis&&e.nis.toLowerCase().includes(P.toLowerCase())).map(e=>(0,s.jsxs)("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4 font-medium text-gray-900",children:[e.name,(0,s.jsx)("div",{className:"text-xs text-gray-400",children:e.nis})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-500",children:e.class}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsx)("button",{onClick:()=>R(e.id),className:"text-gray-300 hover:text-red-500 transition-colors",children:(0,s.jsx)(h.Trash2,{size:16})})})]},e.id)),0===A.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"px-6 py-8 text-center text-gray-400 italic",children:"Belum ada data siswa."})})]})]})})]})]})})]})}e.s(["default",()=>p],7581)}]);